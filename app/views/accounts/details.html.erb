<%= render 'accounts/header' %>

<div class="container">
  <div class="row">
    <div class="col-12 col-lg-3">
      <%= render 'accounts/navigation' %>
    </div>
    <div class="col-12 col-lg-9">
      <h1 class="mb-4">Your details</h1>

      <%= form_with model: @account, url: update_details_account_path, method: :patch, local: true do |f| %>
        <% if @account.errors.any? %>
          <div class="alert alert-danger" role="alert">
            <h4 class="alert-heading">Please correct the following errors:</h4>
            <ul>
              <% @account.errors.full_messages.each do |message| %>
                <li><%= message %></li>
              <% end %>
            </ul>
          </div>
        <% end %>

        <label class="form-label" for="account_name">
          <p class="mb-0">Your name</p>
          <p class="text-muted small mb-0">Visible as part of any publicly viewable collections you've created</p>
        </label>
        <%= f.text_field :name, class: 'form-control border-purple-light mb-5', required: true, title: 'Please enter a name' %>

        <label class="form-label" for="account_email">
          <p class="mb-0">Email address</p>
        </label>
        <%= f.email_field :email, class: 'form-control border-purple-light mb-5', required: true, title: 'Please enter an email' %>

        <label class="form-label" for="displayphoto">
          <p class="mb-0">Display photo</p>
          <p class="mb-2 small text-muted">Profile picture imported via GitHub account</p>
        </label>
        <div class="well p-3 mb-5">
          <div class="d-md-flex align-items-center">
            <% if @account.profile_picture_url %>
              <img src="<%= @account.profile_picture_url %>" alt=" " class="rounded border img-fluid project-logo me-3 mb-3 mb-md-0" height="100" width="100" onerror="this.style.display='none'">
            <% end %>

            <div class="form-check">
              <%= f.check_box :show_profile_picture, class: 'form-check-input', id: 'account_show_profile_picture' %>
              <%= f.label :show_profile_picture, 'Show my profile picture on ecosystems', class: 'form-check-label' %>
            </div>
          </div>
        </div>

        <hr />
        <%= f.submit 'Save', class: 'btn btn-primary rounded-pill' %>
      <% end %>
    </div>
  </div>
</div>
